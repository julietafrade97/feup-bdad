////As mensagens que um utilizador X envia para outro utilizador Y

SELECT M.id, M.conteudo, M.dataEnvio
FROM Mensagem M, Utilizador URecebe, Recebe R
WHERE URecebe.id =Y 
AND URecebe.id=R.idUser 
AND M.id = R.idMensagem 
AND M.id in (SELECT E.idMensagem FROM Utilizador UEnvia, Envia E WHERE UEnvia.id= X AND UEnvia.id=E.idUser);

////Duração de um album X

SELECT SUM(M.duracao)
FROM Musica M
WHERE M.id in (SELECT MA.idMusica FROM MusicaAlbum MA, Album A WHERE A.id=MA.idAlbum AND A.id=X);

////Os concertos de um interprete X num pais Y

SELECT O.idConcerto
FROM Concerto O, Interprete I
WHERE I.id = X 
AND O.idInterprete = I.id 
AND O.idCidade in (SELECT C.id FROM Cidade C, Pais P WHERE C.idPais = P.id AND P.id=Y);

////Id dos Utilizadores premium que usam telemovel

SELECT UP.id
FROM TipoDispositivo TD, Dispositivo D,  Utilizador U, UtilizadorPremium UP,
WHERE TD.tipoNome = 'Phone' 
AND D.idTipoDispositivo = TD.idTipoDispositivo 
AND U.id = D.idUser 
AND UP.id = U.id;

////Media das idades dos utilizadores que seguem uma playlist X

SELECT avg(U.idade)
FROM Utilizador U, Playlist P, SeguePlaylist SP
WHERE P.id = SP.idPlaylist 
AND U.id = SP.idUser
AND SP.idPlaylist = X;

